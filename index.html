<!doctype html>
<html lang="ta">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Class Attendance - Responsive</title>
  <style>
    *{
      margin:0; padding:0; box-sizing:border-box;
    }
    body{
      font-family:Segoe UI,Arial,sans-serif;
      background:#f4f6f9;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    header{
      background:#009966;
      color:#fff;
      padding:25px 20px;
      text-align:center;
      box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }
    .logo{
      width:120px;
      height:120px;
      border-radius:50%;
      object-fit:cover;
      margin:0 auto 15px;
      display:block;
      border:4px solid #fff;
      box-shadow:0 4px 10px rgba(0,0,0,0.2);
      animation:logoEntry 1s ease-out, logoPulse 2s ease-in-out 1s infinite;
      transition:transform 0.3s ease;
    }
    .logo:hover{
      transform:scale(1.1) rotate(5deg);
      box-shadow:0 6px 15px rgba(0,0,0,0.3);
    }
    @keyframes logoEntry{
      0%{
        opacity:0;
        transform:scale(0.3) rotate(-180deg);
      }
      60%{
        transform:scale(1.1) rotate(10deg);
      }
      100%{
        opacity:1;
        transform:scale(1) rotate(0deg);
      }
    }
    @keyframes logoPulse{
      0%, 100%{
        transform:scale(1);
        box-shadow:0 4px 10px rgba(0,0,0,0.2);
      }
      50%{
        transform:scale(1.05);
        box-shadow:0 6px 15px rgba(0,153,102,0.4);
      }
    }
    h1{
      font-size:1.8rem;
      margin:0 auto;
      max-width:600px;
      line-height:1.3;
    }
    .content{
      flex:1;
      padding:20px;
      max-width:1100px;
      width:100%;
      margin:auto;
    }
    .card{
      background:#fff;
      border-radius:10px;
      padding:20px;
      margin-bottom:20px;
      box-shadow:0 3px 8px rgba(0,0,0,0.08);
    }
    label{
      display:block;
      margin:12px 0 6px;
      font-weight:600;
      font-size:0.95rem;
    }
    input,select{
      width:100%;
      padding:12px;
      border:1px solid #ccc;
      border-radius:6px;
      font-size:1rem;
      outline:none;
      transition:0.2s;
    }
    input:focus,select:focus{
      border-color:#009966;
      box-shadow:0 0 3px rgba(0,153,102,0.4);
    }
    .row{
      display:flex;
      flex-wrap:wrap;
      gap:15px;
    }
    .row > div{
      flex:1;
      min-width:200px;
    }
    .batch-options{
      margin:10px 0;
      display:flex;
      flex-wrap:wrap;
      gap:15px;
    }
    .batch-options label{
      margin:0;
      font-weight:normal;
      display:flex;
      align-items:center;
      cursor:pointer;
    }
    .batch-options input[type="radio"]{
      width:auto;
      margin-right:8px;
    }
    .manual-batch{display:none;}
    .manual-batch.active{display:block;}
    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-top:16px;
    }
    button{
      flex:1;
      min-width:120px;
      padding:12px;
      border:none;
      border-radius:6px;
      font-size:1rem;
      font-weight:600;
      cursor:pointer;
      transition:0.25s;
    }
    #addBtn{background:#009966;color:#fff;}
    #addBtn:hover{background:#007a52;}
    #clearBtn{background:#dc3545;color:#fff;}
    #clearBtn:hover{background:#b02a37;}
    #exportBtn{background:#17a2b8;color:#fff;}
    #exportBtn:hover{background:#117a8b;}
    .small{font-size:0.85rem;color:#666;margin-top:10px;}
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
      font-size:0.9rem;
    }
    th,td{
      padding:10px;
      border:1px solid #ddd;
      text-align:left;
    }
    th{
      background:#009966;
      color:#fff;
    }
    tr:nth-child(even){background:#f9f9f9;}
    .table-wrapper{
      overflow-x:auto;
    }
    footer{
      background:#009966;
      color:white;
      text-align:center;
      padding:15px;
      font-size:0.9rem;
    }
    @media (max-width:768px){
      .logo{
        width:100px;
        height:100px;
      }
      h1{
        font-size:1.5rem;
      }
    }
    @media (max-width:600px){
      header{
        padding:20px 15px;
      }
      .logo{
        width:90px;
        height:90px;
      }
      h1{
        font-size:1.3rem;
      }
      .content{
        padding:15px;
      }
      .card{
        padding:15px;
      }
      .row > div{
        min-width:100%;
      }
      .actions{
        flex-direction:column;
      }
      button{
        width:100%;
        min-width:100%;
      }
      .batch-options{
        flex-direction:column;
        gap:10px;
      }
    }
    @media (max-width:400px){
      .logo{
        width:80px;
        height:80px;
      }
      h1{
        font-size:1.1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQrbXFwCgMZuZFmV14L-zB4evpV5AS_HK6vVfSgv_Kk0Adg34gsVeGG9QzPb3t5V_Deg6c&usqp=CAU" 
         alt="Logo" class="logo" onerror="this.style.display='none'">
    <h1>MSEED Class Attendance & Record System</h1>
  </header>

  <div class="content">
    <div class="card">
      <div class="row">
        <div>
          <label for="date">Date</label>
          <input type="date" id="date" />
        </div>
        <div>
          <label for="day">Day</label>
          <select id="day">
            <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
            <option>Thursday</option><option>Friday</option><option>Saturday</option>
            <option>Sunday</option>
          </select>
        </div>
      </div>

      <label>Batch Type</label>
      <div class="batch-options">
        <label><input type="radio" name="batchType" value="preset" checked /> Preset Batch</label>
        <label><input type="radio" name="batchType" value="manual" /> Manual Batch Entry</label>
      </div>

      <div id="presetBatch">
        <label for="batchPreset">Batch / Time</label>
        <select id="batchPreset">
          <option value="Batch 1 (7:30-8:30pm)">Batch 1 (7:30-8:30pm)</option>
          <option value="Batch 2 (8:30-9:30pm)">Batch 2 (8:30-9:30pm)</option>
        </select>
      </div>

      <div id="manualBatch" class="manual-batch">
        <div class="row">
          <div>
            <label for="batchNumber">Batch Number</label>
            <input id="batchNumber" placeholder="e.g., M-SEED_25-1925872" />
          </div>
          <div>
            <label for="batchTime">Batch Time</label>
            <input id="batchTime" placeholder="e.g., 7:30-8:30pm" />
          </div>
        </div>
      </div>

      <label for="trainer">Trainer Name</label>
      <input id="trainer" placeholder="Enter trainer name" />

      <label for="student">Student Name</label>
      <input id="student" placeholder="Enter student name" />

      <div class="actions">
        <button id="addBtn">Add Record</button>
        <button id="clearBtn" type="button">Clear All</button>
        <button id="exportBtn" type="button">Export CSV</button>
      </div>
      <p class="small">Auto-fills today's date & day. You can change fields before saving.</p>
    </div>

    <div class="card">
      <h3 style="margin-top:0;color:#009966;">Saved Records</h3>
      <div class="table-wrapper">
        <table id="recordsTable">
          <thead>
            <tr><th>#</th><th>Date</th><th>Day</th><th>Batch</th><th>Time</th><th>Trainer</th><th>Student</th><th>Saved At</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 MSEED Class Attendance System</p>
  </footer>

<script>
  let records = [];
  const dateEl = document.getElementById('date');
  const dayEl = document.getElementById('day');
  const batchPresetEl = document.getElementById('batchPreset');
  const batchNumberEl = document.getElementById('batchNumber');
  const batchTimeEl = document.getElementById('batchTime');
  const trainerEl = document.getElementById('trainer');
  const studentEl = document.getElementById('student');
  const addBtn = document.getElementById('addBtn');
  const exportBtn = document.getElementById('exportBtn');
  const clearBtn = document.getElementById('clearBtn');
  const tbody = document.querySelector('#recordsTable tbody');
  const presetBatchDiv = document.getElementById('presetBatch');
  const manualBatchDiv = document.getElementById('manualBatch');
  const batchTypeRadios = document.querySelectorAll('input[name="batchType"]');

  // Save records to localStorage
  function saveToStorage() {
    localStorage.setItem('attendanceRecords', JSON.stringify(records));
  }

  // Load records from localStorage
  function loadFromStorage() {
    const saved = localStorage.getItem('attendanceRecords');
    if (saved) {
      records = JSON.parse(saved);
    }
  }

  function setToday() {
    const today = new Date();
    dateEl.value = today.toISOString().slice(0, 10);
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    dayEl.value = days[today.getDay()];
  }

  function render() {
    tbody.innerHTML = '';
    if (records.length === 0) {
      tbody.innerHTML = '<tr><td colspan="8" style="text-align:center;color:#999;">No records yet</td></tr>';
      return;
    }
    records.forEach((r, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${i + 1}</td>
        <td>${r.date}</td>
        <td>${r.day}</td>
        <td>${r.batch}</td>
        <td>${r.time}</td>
        <td>${r.trainer || '-'}</td>
        <td>${r.student}</td>
        <td>${r.savedAt}</td>`;
      tbody.appendChild(tr);
    });
  }

  function getBatchValues() {
    const batchType = document.querySelector('input[name="batchType"]:checked').value;
    if (batchType === 'preset') {
      let selected = batchPresetEl.value;
      let [batch, time] = selected.split(' (');
      time = time ? time.replace(')', '') : '';
      return { batch, time };
    } else {
      const num = batchNumberEl.value.trim();
      const time = batchTimeEl.value.trim();
      return { batch: num, time: time };
    }
  }

  function addRecord() {
    const date = dateEl.value;
    const day = dayEl.value;
    const { batch, time } = getBatchValues();
    const trainer = trainerEl.value.trim();
    const student = studentEl.value.trim();
    if (!date || !student) { alert('Date and Student name are required.'); return; }
    if (!batch) { alert('Please enter batch information.'); return; }
    const savedAt = new Date().toLocaleString();
    records.push({ date, day, batch, time, trainer, student, savedAt });
    saveToStorage(); // save when adding
    studentEl.value = '';
    batchNumberEl.value = '';
    batchTimeEl.value = '';
    render();
  }

  function exportCSV() {
    if (records.length === 0) { alert('No records to export.'); return; }
    const header = ['Date', 'Day', 'Batch', 'Time', 'Trainer', 'Student', 'SavedAt'];
    const rows = records.map(r => [r.date, r.day, r.batch, r.time, r.trainer || '', r.student, r.savedAt]);
    const csv = [header, ...rows].map(r => r.map(cell => `"${String(cell).replace(/"/g, '""')}"`).join(',')).join('\n');
    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `class_records_${new Date().toISOString().slice(0, 10)}.csv`;
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  }

  function clearAll() {
    if (!confirm('Clear all saved records?')) return;
    records.length = 0;
    saveToStorage(); // clear from storage also
    render();
  }

  batchTypeRadios.forEach(radio => {
    radio.addEventListener('change', (e) => {
      if (e.target.value === 'manual') {
        presetBatchDiv.style.display = 'none';
        manualBatchDiv.classList.add('active');
      }
      else {
        presetBatchDiv.style.display = 'block';
        manualBatchDiv.classList.remove('active');
      }
    });
  });

  addBtn.addEventListener('click', addRecord);
  exportBtn.addEventListener('click', exportCSV);
  clearBtn.addEventListener('click', clearAll);

  // INIT
  setToday();
  loadFromStorage();
  render();
</script>


</body>
</html>
